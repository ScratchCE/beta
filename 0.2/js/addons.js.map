{"version":3,"file":"js/addons.js","sources":["webpack://GUI/./src/addons/addons/drag-drop/dragged-over.css","webpack://GUI/./src/addons/addons/pause/style.css","webpack://GUI/./src/addons/addons/mute-project/icon--mute.svg","webpack://GUI/./src/addons/addons/pause/pause.svg","webpack://GUI/./src/addons/addons/pause/play.svg","webpack://GUI/./src/addons/addons/debugger/module.js","webpack://GUI/./src/addons/addons/drag-drop/_runtime_entry.js","webpack://GUI/./src/addons/addons/drag-drop/userscript.js","webpack://GUI/./src/addons/addons/mute-project/_runtime_entry.js","webpack://GUI/./src/addons/addons/mute-project/userscript.js","webpack://GUI/./src/addons/addons/pause/_runtime_entry.js","webpack://GUI/./src/addons/addons/pause/userscript.js","webpack://GUI/./src/addons/api.js","webpack://GUI/./src/addons/contextmenu.js","webpack://GUI/./src/addons/generated/addon-entries.js","webpack://GUI/./src/addons/generated/l10n-entries.js","webpack://GUI/./src/addons/polyfill.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* Based on the `stage-selector_raised` class */\\ndiv[class*=\\\"stage-selector_header_\\\"],\\ndiv[class*=\\\"sprite-selector_sprite-selector\\\"],\\ndiv[class*=\\\"sprite-info_sprite-info\\\"],\\ndiv[class*=\\\"monitor_list-body\\\"] {\\n  -webkit-transition: background-color 0.25s ease;\\n  -o-transition: background-color 0.25s ease;\\n  transition: background-color 0.25s ease;\\n}\\n.sa-dragged-over,\\n.sa-dragged-over div[class*=\\\"stage-selector_header_\\\"],\\n.sa-dragged-over div[class*=\\\"sprite-info_sprite-info\\\"],\\n.sa-dragged-over div[class*=\\\"monitor_list-body\\\"] {\\n  background-color: hsla(0, 100%, 77%, 1) !important;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".pause-btn {\\n  width: 2rem;\\n  height: 2rem;\\n  padding: 0.375rem;\\n  border-radius: 0.25rem;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  user-drag: none;\\n  cursor: pointer;\\n}\\n\\n.pause-btn:hover {\\n  background-color: hsla(0, 100%, 65%, 0.15);\\n}\\n\", \"\"]);\n\n// exports\n","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEZyb20gaHR0cHM6Ly9naXRodWIuY29tL0xMSy9zY3JhdGNoLWd1aS8gLS0+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Tb3VuZC9FZmZlY3RzL011dGU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iU291bmQvRWZmZWN0cy9NdXRlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBmaWxsPSIjQ0Y2M0NGIiBkPSJNMTMuNDU0MTc0OSw1LjA0ODE1MjQzIEwxNS42MjgxMTY4LDIuODc0MjEwNTQgQzE1LjkyMTAxLDIuNTgxMzE3MzIgMTYuMzk1ODgzNywyLjU4MTMxNzMyIDE2LjY4ODc3NywyLjg3NDIxMDU0IEMxNi45ODE2NzAyLDMuMTY3MTAzNzYgMTYuOTgxNjcwMiwzLjY0MTk3NzQ5IDE2LjY4ODc3NywzLjkzNDg3MDcxIEw0LjUzMDMzMDA5LDE2LjA5MzMxNzYgQzQuMjM3NDM2ODcsMTYuMzg2MjEwOCAzLjc2MjU2MzEzLDE2LjM4NjIxMDggMy40Njk2Njk5MSwxNi4wOTMzMTc2IEMzLjE3Njc3NjcsMTUuODAwNDI0NCAzLjE3Njc3NjcsMTUuMzI1NTUwNiAzLjQ2OTY2OTkxLDE1LjAzMjY1NzQgTDYuMzEyMTQ5MzIsMTIuMTkwMTc4IEM2LjEyNDExOTEsMTIuMDYyMTM3OSA2LDExLjg0NjMzMzEgNiwxMS42MDI5ODc1IEw2LDguNjM3NDg3NSBDNiw4LjI0NzExMjUgNi4zMTk0MTUyNyw3LjkyNzYxMjUgNi43MDk2ODY3NSw3LjkyNzYxMjUgTDcuMDI0NjAzMjIsNy45Mjc2MTI1IEM4Ljc1Nzc2ODQ4LDcuOTI3NjEyNSAxMC4yOTQxMTEsNi44MTM4NjI1IDEwLjgzMzk2NzgsNS4xNjY4NjI1IEMxMC45Mjk1Njc0LDQuODc0MzYyNSAxMS4yMDE3NDUyLDQuNjc3NDg3NSAxMS41MDc2NjQxLDQuNjc3NDg3NSBMMTIuODMxNDM3OSw0LjY3NzQ4NzUgQzEzLjEwMDI4NDQsNC42Nzc0ODc1IDEzLjMzNDEwNzUsNC44MjcxNzIwOCAxMy40NTQxNzQ5LDUuMDQ4MTUyNDMgWiBNMTMuNTQsOS4wODM2NDc3MSBMMTMuNTQsMTQuODUzMTEyNSBDMTMuNTQsMTUuMjQ1NzM3NSAxMy4yMjI4MzQxLDE1LjU2Mjk4NzUgMTIuODMxNDM3OSwxNS41NjI5ODc1IEwxMS41MDc2NjQxLDE1LjU2Mjk4NzUgQzExLjIwMTc0NTIsMTUuNTYyOTg3NSAxMC45Mjk1Njc0LDE1LjM2NjExMjUgMTAuODMzOTY3OCwxNS4wNzM2MTI1IEMxMC41NzczNzg1LDE0LjI5MDgwNzcgMTAuMDk1NjgxMywxMy42Mjg0NjUgOS40NzQ3MzUzMSwxMy4xNDg5MTI0IEwxMy41NCw5LjA4MzY0NzcxIFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+Cg==\"","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTgiIHdpZHRoPSIxOCI+PHBhdGggZD0iTTIzMS40MjkgMTg4LjkyOVYxNzEuMDdoNC4yODV2MTcuODU4em0xMi4xNDIgMFYxNzEuMDdoNC4yODZ2MTcuODU4eiIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wMzMwOSAwIDAgLjk1NDI3IC0yMzguNTczIC0xNjIuNzY5KSIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsPSIjZmZhZTAwIiBzdHJva2U9IiNkODk0MDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm5vcm1hbCIvPjwvc3ZnPg==\"","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTgiIHdpZHRoPSIxOCI+PHBhdGggZD0ibTI0Ni4wNTUgMTgwLTEyLjExIDEyLjExdi0yNC4yMnoiIHRyYW5zZm9ybT0ibWF0cml4KDEuMTM5NDkgMCAwIC42Nzk0MyAtMjY0LjU5NSAtMTEzLjI5OCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlPSIjZDg5NDAwIiBmaWxsPSIjZmZhZTAwIiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iLz48L3N2Zz4=\"","import EventTarget from \"../../event-target.js\"; /* inserted by pull.js */\n\n// https://github.com/LLK/scratch-vm/blob/bb352913b57991713a5ccf0b611fda91056e14ec/src/engine/thread.js#L198\nconst STATUS_RUNNING = 0;\nconst STATUS_PROMISE_WAIT = 1;\nconst STATUS_YIELD = 2;\nconst STATUS_YIELD_TICK = 3;\nconst STATUS_DONE = 4;\n\nlet vm;\nlet sequencerStepThread; // The unmodified sequencer.stepThread function\n\nlet paused = false;\nlet pausedThreadState = new WeakMap();\nlet pauseNewThreads = false;\n\nlet steppingThread = null;\n\nlet eventTarget = new EventTarget();\n\nexport const isPaused = () => paused;\n\nconst pauseThread = (thread) => {\n  if (!thread.updateMonitor && !pausedThreadState.has(thread)) {\n    pausedThreadState.set(thread, {\n      time: vm.runtime.currentMSecs,\n    });\n    if (thread === vm.runtime.sequencer.activeThread) {\n      // If we are the active thread, we hit paused in the middle of executing a block\n      if (vm.runtime.sequencer.activeThread) {\n        const thread = vm.runtime.sequencer.activeThread;\n        pausedThreadState.get(thread).status = thread.status;\n\n        // Force the block to exit immediately\n        Object.defineProperty(thread, \"status\", {\n          get() {\n            return STATUS_PROMISE_WAIT;\n          },\n          set(status) {\n            pausedThreadState.get(this).status = status;\n          },\n        });\n      }\n    }\n  }\n};\n\nexport const setPaused = (_paused) => {\n  if (_paused) {\n    vm.runtime.audioEngine.audioContext.suspend();\n    if (!vm.runtime.ioDevices.clock._paused) {\n      vm.runtime.ioDevices.clock.pause();\n    }\n    vm.runtime.threads.forEach(pauseThread);\n  } else {\n    vm.runtime.audioEngine.audioContext.resume();\n    vm.runtime.ioDevices.clock.resume();\n    for (const thread of vm.runtime.threads) {\n      const pauseState = pausedThreadState.get(thread);\n      if (pauseState) {\n        // TW: Compiler state is stored differently\n        if (thread.timer) {\n          thread.timer.startTime += vm.runtime.currentMSecs - pauseState.time;\n        }\n        const stackFrame = thread.peekStackFrame();\n        if (stackFrame && stackFrame.executionContext && stackFrame.executionContext.timer) {\n          stackFrame.executionContext.timer.startTime += vm.runtime.currentMSecs - pauseState.time;\n        }\n      }\n    }\n    pausedThreadState = new WeakMap();\n  }\n  if (paused !== _paused) {\n    paused = _paused;\n    eventTarget.dispatchEvent(new CustomEvent(\"change\"));\n  }\n};\n\nexport const onPauseChanged = (listener) => {\n  eventTarget.addEventListener(\"change\", () => listener(paused));\n};\n\nexport const onSingleStep = (listener) => {\n  eventTarget.addEventListener(\"step\", listener);\n};\n\nexport const getRunningThread = () => {\n  return steppingThread;\n};\n\n// A modified version of this function\n// https://github.com/LLK/scratch-vm/blob/0e86a78a00db41af114df64255e2cd7dd881329f/src/engine/sequencer.js#L179\n// Returns if we should continue executing this thread.\nconst singleStepThread = (thread) => {\n  let currentBlockId = thread.peekStack();\n\n  if (!currentBlockId) {\n    thread.popStack();\n\n    if (thread.stack.length === 0) {\n      thread.status = STATUS_DONE;\n      return false;\n    }\n  }\n\n  vm.runtime.sequencer.activeThread = thread;\n  pauseNewThreads = true;\n\n  if (!thread.target) {\n    vm.runtime.sequencer.retireThread(thread);\n  } else {\n    /*\n          We need to call execute(this, thread) like the original sequencer. We don't\n          have access to that method, so we need to force the original stepThread to run\n          execute for us then exit before it tries to run more blocks.\n          So, we make `thread.blockGlowInFrame = ...` throw an exception, so this line:\n          https://github.com/LLK/scratch-vm/blob/bb352913b57991713a5ccf0b611fda91056e14ec/src/engine/sequencer.js#L214\n          will end the function early. We then have to set it back to normal afterward.\n\n          Why are we here just to suffer?\n         */\n    const throwMsg = [\"special error used by Scratch Addons for implementing single-stepping\"];\n\n    Object.defineProperty(thread, \"blockGlowInFrame\", {\n      set(block) {\n        throw throwMsg;\n      },\n    });\n\n    try {\n      sequencerStepThread.call(vm.runtime.sequencer, thread);\n    } catch (err) {\n      if (err !== throwMsg) throw err;\n    }\n\n    Object.defineProperty(thread, \"blockGlowInFrame\", {\n      value: null,\n      configurable: true,\n      enumerable: true,\n      writable: true,\n    });\n  }\n\n  vm.runtime.sequencer.activeThread = null;\n  pauseNewThreads = false;\n  thread.blockGlowInFrame = currentBlockId;\n\n  if (thread.status === STATUS_YIELD) {\n    thread.status = STATUS_RUNNING;\n    return false;\n  } else if (thread.status === STATUS_PROMISE_WAIT || thread.status === STATUS_YIELD_TICK) {\n    return false;\n  }\n\n  if (thread.peekStack() === currentBlockId) {\n    thread.goToNextBlock();\n  }\n\n  while (!thread.peekStack()) {\n    thread.popStack();\n\n    if (thread.stack.length === 0) {\n      thread.status = STATUS_DONE;\n      return false;\n    }\n\n    const stackFrame = thread.peekStackFrame();\n\n    if (stackFrame.isLoop) {\n      if (!thread.isWarpMode) {\n        return false;\n      } else {\n        continue;\n      }\n    } else if (stackFrame.waitingReporter) {\n      return false;\n    }\n\n    thread.goToNextBlock();\n  }\n\n  return true;\n};\n\nconst findNewSteppingThread = (startIndex) => {\n  for (var i = startIndex; i < vm.runtime.threads.length; i++) {\n    const newThread = vm.runtime.threads[i];\n\n    if (newThread.status === STATUS_YIELD_TICK) {\n      newThread.status = STATUS_RUNNING;\n    }\n\n    if (newThread.status === STATUS_RUNNING || newThread.status === STATUS_YIELD) {\n      return newThread;\n    }\n  }\n  return null;\n};\n\nexport const singleStep = () => {\n  const pauseState = pausedThreadState.get(steppingThread);\n  if (steppingThread) {\n    // Make it look like no time has passed\n    const stackFrame = steppingThread.peekStackFrame();\n    if (stackFrame && stackFrame.executionContext && stackFrame.executionContext.timer) {\n      stackFrame.executionContext.timer.startTime += vm.runtime.currentMSecs - pauseState.time;\n    }\n    pauseState.time = vm.runtime.currentMSecs;\n\n    // Execute the block\n    const continueExecuting = singleStepThread(steppingThread);\n\n    if (!continueExecuting) {\n      // Try to move onto the next thread\n      steppingThread = findNewSteppingThread(vm.runtime.threads.indexOf(steppingThread) + 1);\n    }\n  }\n\n  // If we don't have a thread, than we are between VM steps and should search for a new thread\n  if (!steppingThread) {\n    steppingThread = findNewSteppingThread(0);\n\n    // End of VM step, emulate one frame of time passing.\n    vm.runtime.ioDevices.clock._pausedTime += vm.runtime.currentStepTime;\n    // Skip all sounds forward by vm.runtime.currentStepTime milliseconds so it's as\n    //  if they where playing for one frame.\n    const audioContext = vm.runtime.audioEngine.audioContext;\n    for (const target of vm.runtime.targets) {\n      for (const soundId of Object.keys(target.sprite.soundBank.soundPlayers)) {\n        const soundPlayer = target.sprite.soundBank.soundPlayers[soundId];\n        if (soundPlayer.outputNode) {\n          soundPlayer.outputNode.stop(audioContext.currentTime);\n          soundPlayer._createSource();\n          soundPlayer.outputNode.start(\n            audioContext.currentTime,\n            audioContext.currentTime - soundPlayer.startingUntil + vm.runtime.currentStepTime / 1000\n          );\n          soundPlayer.startingUntil -= vm.runtime.currentStepTime / 1000;\n        }\n      }\n    }\n    // Move all threads forward one frame in time. For blocks like `wait () seconds`\n    for (const thread of vm.runtime.threads) {\n      if (pausedThreadState.has(thread)) {\n        pausedThreadState.get(thread).time += vm.runtime.currentStepTime;\n      }\n    }\n\n    // Try to run edge activated hats\n    pauseNewThreads = true;\n\n    const hats = vm.runtime._hats;\n    for (const hatType in hats) {\n      if (!Object.prototype.hasOwnProperty.call(hats, hatType)) continue;\n      const hat = hats[hatType];\n      if (hat.edgeActivated) {\n        vm.runtime.startHats(hatType);\n      }\n    }\n\n    pauseNewThreads = false;\n  }\n\n  eventTarget.dispatchEvent(new CustomEvent(\"step\"));\n};\n\nexport const setup = (_vm) => {\n  if (vm) {\n    return;\n  }\n\n  vm = _vm;\n\n  sequencerStepThread = vm.runtime.sequencer.stepThread;\n  vm.runtime.sequencer.stepThread = function (thread) {\n    if (pausedThreadState.has(thread)) {\n      return;\n    }\n\n    sequencerStepThread.call(this, thread);\n\n    // Thread was paused in the middle of execution\n    if (pausedThreadState.has(thread)) {\n      const threadPauseState = pausedThreadState.get(thread);\n\n      steppingThread = thread;\n\n      Object.defineProperty(thread, \"status\", {\n        value: threadPauseState.status,\n        configurable: true,\n        enumerable: true,\n        writable: true,\n      });\n\n      delete threadPauseState.status;\n\n      eventTarget.dispatchEvent(new CustomEvent(\"step\"));\n    }\n  };\n\n  const ogStepThreads = vm.runtime.sequencer.stepThreads;\n  vm.runtime.sequencer.stepThreads = function () {\n    // If we where half way through a vm step and have unpaused, pick up were we left off.\n    if (steppingThread && !paused) {\n      const threads = vm.runtime.threads;\n      const index = threads.indexOf(steppingThread);\n      if (index !== -1) {\n        for (let i = index; i < threads.length; i++) {\n          const thread = threads[i];\n\n          if (thread.status === STATUS_YIELD_TICK) {\n            thread.status = STATUS_RUNNING;\n          }\n\n          if (thread.status === STATUS_RUNNING || thread.status === STATUS_YIELD) {\n            vm.runtime.sequencer.stepThread(thread);\n          }\n        }\n      }\n\n      steppingThread = null;\n    }\n\n    return ogStepThreads.call(this);\n  };\n\n  // Unpause when green flag\n  const originalGreenFlag = vm.runtime.greenFlag;\n  vm.runtime.greenFlag = function () {\n    setPaused(false);\n    return originalGreenFlag.call(this);\n  };\n\n  // Disable edge-activated hats and hats like \"when key pressed\" while paused.\n  const originalStartHats = vm.runtime.startHats;\n  vm.runtime.startHats = function (...args) {\n    const hat = args[0];\n    if (pauseNewThreads) {\n      if (\n        hat !== \"event_whenbroadcastreceived\" &&\n        hat !== \"control_start_as_clone\" &&\n        !this.getIsEdgeActivatedHat(hat)\n      ) {\n        return [];\n      }\n      const newThreads = originalStartHats.apply(this, args);\n      for (const thread of newThreads) {\n        pauseThread(thread);\n      }\n      return newThreads;\n    } else {\n      if (paused) {\n        // We don't want to stop broadcasts or clone starts as they can be run by a user\n        //  while paused or run by paused threads while single stepping.\n        if (hat !== \"event_whenbroadcastreceived\" && hat !== \"control_start_as_clone\") {\n          return [];\n        }\n      }\n\n      return originalStartHats.apply(this, args);\n    }\n  };\n\n  // Paused threads should not be counted as running when updating GUI state.\n  const originalGetMonitorThreadCount = vm.runtime._getMonitorThreadCount;\n  vm.runtime._getMonitorThreadCount = function (threads) {\n    let count = originalGetMonitorThreadCount.call(this, threads);\n    if (paused) {\n      for (const thread of threads) {\n        if (pausedThreadState.has(thread)) {\n          count++;\n        }\n      }\n    }\n    return count;\n  };\n};\n","/* generated by pull.js */\nimport _import0 from \"./userscript.js\";\nimport _import1 from \"!css-loader!./dragged-over.css\";\nexport const resources = {\n  \"userscript.js\": _import0,\n  \"dragged-over.css\": _import1,\n};\n","export default async function ({ addon, global, console }) {\n  const DRAG_OVER_CLASS = \"sa-dragged-over\";\n\n  const nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, \"value\").set;\n  const reactAwareSetValue = (el, value) => {\n    nativeInputValueSetter.call(el, value);\n    el.dispatchEvent(new Event(\"change\", { bubbles: true }));\n  };\n\n  const globalHandleDragOver = (e) => {\n    if (addon.self.disabled) return;\n\n    if (!e.dataTransfer.types.includes(\"Files\")) {\n      return;\n    }\n\n    let el;\n    let callback;\n    if (\n      (el = e.target.closest('div[class*=\"sprite-selector_sprite-selector\"]')) ||\n      (el = e.target.closest('div[class*=\"stage-selector_stage-selector\"]')) ||\n      (el = e.target.closest('div[class*=\"selector_wrapper\"]'))\n    ) {\n      callback = (files) => {\n        const hdFilter = addon.settings.get(\"use-hd-upload\") ? \"\" : \":not(.sa-better-img-uploads-input)\";\n        const fileInput = el.querySelector('input[class*=\"action-menu_file-input\"]' + hdFilter);\n        fileInput.files = files;\n        fileInput.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      };\n    } else if ((el = e.target.closest('div[class*=\"monitor_list-monitor\"]'))) {\n      callback = (files) => {\n        const contextMenuBefore = document.querySelector(\"body > .react-contextmenu.react-contextmenu--visible\");\n        // Simulate a right click on the list monitor\n        el.dispatchEvent(new MouseEvent(\"contextmenu\", { bubbles: true }));\n        // Get the right click menu that opened (monitor context menus are\n        // children of <body>)\n        const contextMenuAfter = document.querySelector(\"body > .react-contextmenu.react-contextmenu--visible\");\n        // `contextMenuAfter` is only null if the context menu was already open\n        // for the list monitor, in which case we can use the context menu from\n        // before the simulated right click\n        const contextMenu = contextMenuAfter === null ? contextMenuBefore : contextMenuAfter;\n        // Sometimes the menu flashes open, so force hide it.\n        contextMenu.style.display = \"none\";\n        // Override DOM methods to import the text file directly\n        // See: https://github.com/LLK/scratch-gui/blob/develop/src/lib/import-csv.js#L21-L22\n        const appendChild = document.body.appendChild;\n        document.body.appendChild = (fileInput) => {\n          // Restore appendChild to <body>\n          document.body.appendChild = appendChild;\n          if (fileInput instanceof HTMLInputElement) {\n            document.body.appendChild(fileInput);\n            // Prevent Scratch from opening the file input dialog\n            fileInput.click = () => {};\n            // Insert files from the drop event into the file input\n            fileInput.files = files;\n            fileInput.dispatchEvent(new Event(\"change\"));\n            window.requestAnimationFrame(() => {\n              window.requestAnimationFrame(() => {\n                contextMenu.style.display = null;\n                contextMenu.style.opacity = 0;\n                contextMenu.style.pointerEvents = \"none\";\n              });\n            });\n          } else {\n            // The next call for `appendChild` SHOULD be the file input, but if\n            // it's not, then make `appendChild` behave as normal.\n            console.error('File input was not immediately given to appendChild upon clicking \"Import\"!');\n            return appendChild(fileInput);\n          }\n        };\n        // Simulate clicking on the \"Import\" option\n        contextMenu.children[0].click();\n      };\n    } else if (\n      (el = e.target.closest('div[class*=\"question_question-input\"] > input[class*=\"input_input-form_l9eYg\"]'))\n    ) {\n      callback = async (files) => {\n        const text = (await Promise.all(Array.from(files, (file) => file.text())))\n          .join(\"\")\n          // Match pasting behaviour: remove all newline characters at the end\n          .replace(/[\\r\\n]+$/, \"\")\n          .replace(/\\r?\\n|\\r/g, \" \");\n        const selectionStart = el.selectionStart;\n        reactAwareSetValue(el, el.value.slice(0, selectionStart) + text + el.value.slice(el.selectionEnd));\n        el.setSelectionRange(selectionStart, selectionStart + text.length);\n      };\n    }\n    if (!el) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (el.classList.contains(DRAG_OVER_CLASS)) {\n      return;\n    }\n    el.classList.add(DRAG_OVER_CLASS);\n\n    const handleDrop = (e) => {\n      e.preventDefault();\n      cleanup();\n      if (e.dataTransfer.types.includes(\"Files\") && e.dataTransfer.files.length > 0) {\n        callback(e.dataTransfer.files);\n      }\n    };\n\n    const handleDragOver = (e) => {\n      e.preventDefault();\n      e.dataTransfer.dropEffect = \"copy\";\n    };\n    e.dataTransfer.dropEffect = \"copy\";\n\n    const handleDragLeave = (e) => {\n      e.preventDefault();\n      cleanup();\n    };\n\n    const cleanup = () => {\n      el.classList.remove(DRAG_OVER_CLASS);\n      el.removeEventListener(\"dragover\", handleDragOver);\n      el.removeEventListener(\"dragleave\", handleDragLeave);\n      el.removeEventListener(\"drop\", handleDrop);\n    };\n\n    el.addEventListener(\"dragover\", handleDragOver);\n    el.addEventListener(\"dragleave\", handleDragLeave);\n    el.addEventListener(\"drop\", handleDrop);\n  };\n\n  document.addEventListener(\"dragover\", globalHandleDragOver, { useCapture: true });\n}\n","/* generated by pull.js */\nimport _import0 from \"./userscript.js\";\nexport const resources = {\n  \"userscript.js\": _import0,\n};\n","/* inserted by pull.js */\nimport _twAsset0 from \"!url-loader!./icon--mute.svg\";\nconst _twGetAsset = (path) => {\n  if (path === \"/icon--mute.svg\") return _twAsset0;\n  throw new Error(`Unknown asset: ${path}`);\n};\n\nexport default async function ({ addon, global, console }) {\n  const vm = addon.tab.traps.vm;\n  let muted = false;\n  let icon = document.createElement(\"img\");\n  icon.loading = \"lazy\";\n  icon.src = _twGetAsset(\"/icon--mute.svg\");\n  icon.style.display = \"none\";\n  const toggleMute = (e) => {\n    if (e.ctrlKey) {\n      e.cancelBubble = true;\n      e.preventDefault();\n      muted = !muted;\n      if (muted) {\n        vm.runtime.audioEngine.inputNode.gain.value = 0;\n        icon.style.display = \"block\";\n      } else {\n        vm.runtime.audioEngine.inputNode.gain.value = 1;\n        icon.style.display = \"none\";\n      }\n    }\n  };\n  while (true) {\n    let button = await addon.tab.waitForElement(\"[class^='green-flag_green-flag']\", {\n      markAsSeen: true,\n      reduxEvents: [\"scratch-gui/mode/SET_PLAYER\", \"fontsLoaded/SET_FONTS_LOADED\", \"scratch-gui/locales/SELECT_LOCALE\"],\n    });\n    addon.tab.appendToSharedSpace({ space: \"afterStopButton\", element: icon, order: 0 });\n    button.addEventListener(\"click\", toggleMute);\n    button.addEventListener(\"contextmenu\", toggleMute);\n  }\n}\n","/* generated by pull.js */\nimport _import0 from \"./userscript.js\";\nimport _import1 from \"!css-loader!./style.css\";\nexport const resources = {\n  \"userscript.js\": _import0,\n  \"style.css\": _import1,\n};\n","/* inserted by pull.js */\nimport _twAsset0 from \"!url-loader!./pause.svg\";\nimport _twAsset1 from \"!url-loader!./play.svg\";\nconst _twGetAsset = (path) => {\n  if (path === \"/pause.svg\") return _twAsset0;\n  if (path === \"/play.svg\") return _twAsset1;\n  throw new Error(`Unknown asset: ${path}`);\n};\n\nimport { isPaused, setPaused, onPauseChanged, setup } from \"../debugger/module.js\";\n\nexport default async function ({ addon, global, console, msg }) {\n  setup(addon.tab.traps.vm);\n\n  const img = document.createElement(\"img\");\n  img.className = \"pause-btn\";\n  img.draggable = false;\n  img.title = msg(\"pause\");\n\n  const setSrc = () => (img.src = _twGetAsset((isPaused() ? \"/play.svg\" : \"/pause.svg\")));\n  img.addEventListener(\"click\", () => setPaused(!isPaused()));\n  addon.tab.displayNoneWhileDisabled(img);\n  addon.self.addEventListener(\"disabled\", () => setPaused(false));\n  setSrc();\n  onPauseChanged(setSrc);\n\n  while (true) {\n    await addon.tab.waitForElement(\"[class^='green-flag']\", {\n      markAsSeen: true,\n      reduxEvents: [\"scratch-gui/mode/SET_PLAYER\", \"fontsLoaded/SET_FONTS_LOADED\", \"scratch-gui/locales/SELECT_LOCALE\"],\n    });\n    addon.tab.appendToSharedSpace({ space: \"afterGreenFlag\", element: img, order: 0 });\n  }\n}\n","/**\n * Copyright (C) 2021 Thomas Weber\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as\n * published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport IntlMessageFormat from 'intl-messageformat';\nimport SettingsStore from './settings-store-singleton';\nimport dataURLToBlob from '../lib/data-uri-to-blob';\nimport EventTargetShim from './event-target';\nimport AddonHooks from './hooks';\nimport addons from './generated/addon-manifests';\nimport addonMessages from './addons-l10n/en.json';\nimport l10nEntries from './generated/l10n-entries';\nimport addonEntries from './generated/addon-entries';\nimport {addContextMenu} from './contextmenu';\nimport './polyfill';\n\n/* eslint-disable no-console */\n\nconst escapeHTML = str => str.replace(/([<>'\"&])/g, (_, l) => `&#${l.charCodeAt(0)};`);\nconst kebabCaseToCamelCase = str => str.replace(/-([a-z])/g, g => g[1].toUpperCase());\nconst createStylesheet = css => {\n    const style = document.createElement('style');\n    style.textContent = css;\n    return style;\n};\n\nlet _scratchClassNames = null;\nconst getScratchClassNames = () => {\n    if (_scratchClassNames) {\n        return _scratchClassNames;\n    }\n    const cssRules = Array.from(document.styleSheets)\n        // Ignore some scratch-paint stylesheets\n        .filter(styleSheet => (\n            !(\n                styleSheet.ownerNode.textContent.startsWith(\n                    '/* DO NOT EDIT\\n@todo This file is copied from GUI and should be pulled out into a shared library.'\n                ) &&\n                (\n                    styleSheet.ownerNode.textContent.includes('input_input-form') ||\n                    styleSheet.ownerNode.textContent.includes('label_input-group_')\n                )\n            )\n        ))\n        .map(e => {\n            try {\n                return [...e.cssRules];\n            } catch (_e) {\n                return [];\n            }\n        })\n        .flat();\n    const classes = cssRules\n        .map(e => e.selectorText)\n        .filter(e => e)\n        .map(e => e.match(/(([\\w-]+?)_([\\w-]+)_([\\w\\d-]+))/g))\n        .filter(e => e)\n        .flat();\n    _scratchClassNames = [...new Set(classes)];\n    const observer = new MutationObserver(mutationList => {\n        for (const mutation of mutationList) {\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'STYLE') {\n                    _scratchClassNames = null;\n                    observer.disconnect();\n                    return;\n                }\n            }\n        }\n    });\n    observer.observe(document.head, {\n        childList: true\n    });\n    return _scratchClassNames;\n};\n\nlet _mutationObserver;\nlet _mutationObserverCallbacks = [];\nconst addMutationObserverCallback = newCallback => {\n    if (!_mutationObserver) {\n        _mutationObserver = new MutationObserver(() => {\n            for (const cb of _mutationObserverCallbacks) {\n                cb();\n            }\n        });\n        _mutationObserver.observe(document.documentElement, {\n            attributes: false,\n            childList: true,\n            subtree: true\n        });\n    }\n    _mutationObserverCallbacks.push(newCallback);\n};\nconst removeMutationObserverCallback = callback => {\n    _mutationObserverCallbacks = _mutationObserverCallbacks.filter(i => i !== callback);\n};\n\nclass Redux extends EventTargetShim {\n    constructor () {\n        super();\n        this._isInReducer = false;\n        this._initialized = false;\n        this._nextState = null;\n    }\n\n    initialize () {\n        if (!this._initialized) {\n            AddonHooks.appStateReducer = (action, next) => {\n                this._isInReducer = true;\n                this._nextState = next;\n                this.dispatchEvent(new CustomEvent('statechanged', {\n                    detail: {\n                        action,\n                        next\n                    }\n                }));\n                this._nextState = null;\n                this._isInReducer = false;\n            };\n\n            this._initialized = true;\n        }\n    }\n\n    dispatch (m) {\n        if (this._isInReducer) {\n            queueMicrotask(() => AddonHooks.appStateStore.dispatch(m));\n        } else {\n            AddonHooks.appStateStore.dispatch(m);\n        }\n    }\n\n    get state () {\n        if (this._nextState) return this._nextState;\n        return AddonHooks.appStateStore.getState();\n    }\n}\n\nconst getEditorMode = () => {\n    // eslint-disable-next-line no-use-before-define\n    const mode = tabReduxInstance.state.scratchGui.mode;\n    if (mode.isEmbedded) return 'embed';\n    if (mode.isFullScreen) return 'fullscreen';\n    if (mode.isPlayerOnly) return 'projectpage';\n    return 'editor';\n};\n\nconst tabReduxInstance = new Redux();\nconst language = tabReduxInstance.state.locales.locale.split('-')[0];\n\nconst getTranslations = async () => {\n    if (l10nEntries[language]) {\n        const localeMessages = await l10nEntries[language]();\n        Object.assign(addonMessages, localeMessages);\n    }\n};\nconst addonMessagesPromise = getTranslations();\n\nconst untilInEditor = () => {\n    if (!tabReduxInstance.state.scratchGui.mode.isPlayerOnly) {\n        return;\n    }\n    return new Promise(resolve => {\n        const handler = () => {\n            if (!tabReduxInstance.state.scratchGui.mode.isPlayerOnly) {\n                resolve();\n                tabReduxInstance.removeEventListener('statechanged', handler);\n            }\n        };\n        tabReduxInstance.initialize();\n        tabReduxInstance.addEventListener('statechanged', handler);\n    });\n};\n\nconst getDisplayNoneWhileDisabledClass = id => `addons-display-none-${id}`;\n\nconst parseArguments = code => code\n    .split(/(?=[^\\\\]%[nbs])/g)\n    .map(i => i.trim())\n    .filter(i => i.charAt(0) === '%')\n    .map(i => i.substring(0, 2));\nconst fixDisplayName = displayName => displayName.replace(/([^\\s])(%[nbs])/g, (_, before, arg) => `${before} ${arg}`);\nconst compareArrays = (a, b) => JSON.stringify(a) === JSON.stringify(b);\n\nlet _firstAddBlockRan = false;\n\nconst contextMenuCallbacks = [];\nconst CONTEXT_MENU_ORDER = ['editor-devtools', 'block-switching', 'blocks2image', 'swap-local-global'];\nlet createdAnyBlockContextMenus = false;\n\nconst getInternalKey = element => Object.keys(element).find(key => key.startsWith('__reactInternalInstance$'));\n\n// Stylesheets are added at the start of <body> so that they have higher precedence\n// than those in <head>\nconst stylesheetContainer = document.createElement('div');\ndocument.body.insertBefore(stylesheetContainer, document.body.firstChild);\nconst getStylesheetPrecedence = styleElement => {\n    // columns must have higher precedence than hide-flyout\n    if (styleElement.dataset.addonId === 'columns') return 1;\n    return 0;\n};\nconst addStylesheet = styleElement => {\n    const priority = getStylesheetPrecedence(styleElement);\n    for (const child of stylesheetContainer.children) {\n        if (getStylesheetPrecedence(child) >= priority) {\n            stylesheetContainer.insertBefore(styleElement, child);\n            return;\n        }\n    }\n    stylesheetContainer.appendChild(styleElement);\n};\n\nclass Tab extends EventTargetShim {\n    constructor (id) {\n        super();\n        this._id = id;\n        this._seenElements = new WeakSet();\n        // traps is public API\n        this.traps = {\n            get vm () {\n                return tabReduxInstance.state.scratchGui.vm;\n            },\n            getBlockly: () => {\n                if (AddonHooks.blockly) {\n                    return Promise.resolve(AddonHooks.blockly);\n                }\n                return new Promise(resolve => {\n                    AddonHooks.blocklyCallbacks.push(() => resolve(AddonHooks.blockly));\n                });\n            },\n            getPaper: async () => {\n                const modeSelector = await this.waitForElement(\"[class*='paint-editor_mode-selector']\", {\n                    reduxCondition: state => (\n                        state.scratchGui.editorTab.activeTabIndex === 1 && !state.scratchGui.mode.isPlayerOnly\n                    )\n                });\n                const reactInternalKey = Object.keys(modeSelector)\n                    .find(key => key.startsWith('__reactInternalInstance$'));\n                const internalState = modeSelector[reactInternalKey].child;\n                // .tool or .blob.tool only exists on the selected tool\n                let toolState = internalState;\n                let tool;\n                while (toolState) {\n                    const toolInstance = toolState.child.stateNode;\n                    if (toolInstance.tool) {\n                        tool = toolInstance.tool;\n                        break;\n                    }\n                    if (toolInstance.blob && toolInstance.blob.tool) {\n                        tool = toolInstance.blob.tool;\n                        break;\n                    }\n                    toolState = toolState.sibling;\n                }\n                if (tool) {\n                    const paperScope = tool._scope;\n                    return paperScope;\n                }\n                throw new Error('cannot find paper :(');\n            },\n            getInternalKey\n        };\n    }\n\n    get redux () {\n        return tabReduxInstance;\n    }\n\n    waitForElement (selector, {markAsSeen = false, condition, reduxCondition, reduxEvents} = {}) {\n        let externalEventSatisfied = true;\n        const evaluateCondition = () => {\n            if (!externalEventSatisfied) return false;\n            if (condition && !condition()) return false;\n            if (reduxCondition && !reduxCondition(tabReduxInstance.state)) return false;\n            return true;\n        };\n\n        if (evaluateCondition()) {\n            const firstQuery = document.querySelectorAll(selector);\n            for (const element of firstQuery) {\n                if (this._seenElements.has(element)) continue;\n                if (markAsSeen) this._seenElements.add(element);\n                return Promise.resolve(element);\n            }\n        }\n\n        let reduxListener;\n        if (reduxEvents) {\n            externalEventSatisfied = false;\n            reduxListener = ({detail}) => {\n                const type = detail.action.type;\n                // As addons can't run before DOM exists here, ignore fontsLoaded/SET_FONTS_LOADED\n                // Otherwise, as our font loading is very async, we could activate more often than required.\n                if (reduxEvents.includes(type) && type !== 'fontsLoaded/SET_FONTS_LOADED') {\n                    externalEventSatisfied = true;\n                }\n            };\n            this.redux.initialize();\n            this.redux.addEventListener('statechanged', reduxListener);\n        }\n\n        return new Promise(resolve => {\n            const callback = () => {\n                if (!evaluateCondition()) {\n                    return;\n                }\n                const elements = document.querySelectorAll(selector);\n                for (const element of elements) {\n                    if (this._seenElements.has(element)) continue;\n                    resolve(element);\n                    removeMutationObserverCallback(callback);\n                    if (markAsSeen) this._seenElements.add(element);\n                    if (reduxListener) {\n                        this.redux.removeEventListener('statechanged', reduxListener);\n                    }\n                    break;\n                }\n            };\n            addMutationObserverCallback(callback);\n        });\n    }\n\n    appendToSharedSpace ({space, element, order, scope}) {\n        const SHARED_SPACES = {\n            stageHeader: {\n                element: () => document.querySelector(\"[class^='stage-header_stage-size-row']\"),\n                from: () => [],\n                until: () => [\n                    document.querySelector(\"[class^='stage-header_stage-size-toggle-group']\"),\n                    document.querySelector(\"[class^='stage-header_stage-size-row']\").lastChild\n                ]\n            },\n            fullscreenStageHeader: {\n                element: () => document.querySelector(\"[class^='stage-header_stage-menu-wrapper']\"),\n                from: function () {\n                    let emptyDiv = this.element().querySelector('.addon-spacer');\n                    if (!emptyDiv) {\n                        emptyDiv = document.createElement('div');\n                        emptyDiv.style.marginLeft = 'auto';\n                        emptyDiv.className = 'addon-spacer';\n                        this.element().insertBefore(emptyDiv, this.element().lastChild);\n                    }\n                    return [emptyDiv];\n                },\n                until: () => [document.querySelector(\"[class^='stage-header_stage-menu-wrapper']\").lastChild]\n            },\n            afterGreenFlag: {\n                element: () => document.querySelector(\"[class^='controls_controls-container']\"),\n                from: () => [],\n                until: () => [document.querySelector(\"[class^='stop-all_stop-all']\")]\n            },\n            afterStopButton: {\n                element: () => document.querySelector(\"[class^='controls_controls-container']\"),\n                from: () => [document.querySelector(\"[class^='stop-all_stop-all']\")],\n                until: () => []\n            },\n            afterSoundTab: {\n                element: () => document.querySelector(\"[class^='react-tabs_react-tabs__tab-list']\"),\n                from: () => [document.querySelector(\"[class^='react-tabs_react-tabs__tab-list']\").children[2]],\n                until: () => [document.querySelector('#s3devToolBar')]\n            },\n            assetContextMenuAfterExport: {\n                element: () => scope,\n                from: () => Array.prototype.filter.call(\n                    scope.children,\n                    c => c.textContent === this.scratchMessage('gui.spriteSelectorItem.contextMenuExport')\n                ),\n                until: () => Array.prototype.filter.call(\n                    scope.children,\n                    c => c.textContent === this.scratchMessage('gui.spriteSelectorItem.contextMenuDelete')\n                )\n            },\n            assetContextMenuAfterDelete: {\n                element: () => scope,\n                from: () => Array.prototype.filter.call(\n                    scope.children,\n                    c => c.textContent === this.scratchMessage('gui.spriteSelectorItem.contextMenuDelete')\n                ),\n                until: () => []\n            }\n        };\n\n        const spaceInfo = SHARED_SPACES[space];\n        const spaceElement = spaceInfo.element();\n        if (!spaceElement) return false;\n        const from = spaceInfo.from();\n        const until = spaceInfo.until();\n\n        element.dataset.saSharedSpaceOrder = order;\n\n        let foundFrom = false;\n        if (from.length === 0) foundFrom = true;\n\n        // insertAfter = element whose nextSibling will be the new element\n        // -1 means append at beginning of space (prepend)\n        // This will stay null if we need to append at the end of space\n        let insertAfter = null;\n\n        const children = Array.from(spaceElement.children);\n        for (const indexString of children.keys()) {\n            const child = children[indexString];\n            const i = Number(indexString);\n\n            // Find either element from \"from\" before doing anything\n            if (!foundFrom) {\n                if (from.includes(child)) {\n                    foundFrom = true;\n                    // If this is the last child, insertAfter will stay null\n                    // and the element will be appended at the end of space\n                }\n                continue;\n            }\n\n            if (until.includes(child)) {\n                // This is the first SA element appended to this space\n                // If from = [] then prepend, otherwise append after\n                // previous child (likely a \"from\" element)\n                if (i === 0) insertAfter = -1;\n                else insertAfter = children[i - 1];\n                break;\n            }\n\n            if (child.dataset.addonSharedSpaceOrder) {\n                if (Number(child.dataset.addonSharedSpaceOrder) > order) {\n                    // We found another SA element with higher order number\n                    // If from = [] and this is the first child, prepend.\n                    // Otherwise, append before this child.\n                    if (i === 0) insertAfter = -1;\n                    else insertAfter = children[i - 1];\n                    break;\n                }\n            }\n        }\n\n        if (!foundFrom) return false;\n        // It doesn't matter if we didn't find an \"until\"\n\n        if (insertAfter === null) {\n            // This might happen with until = []\n            spaceElement.appendChild(element);\n        } else if (insertAfter === -1) {\n            // This might happen with from = []\n            spaceElement.prepend(element);\n        } else {\n            // Works like insertAfter but using insertBefore API.\n            // nextSibling cannot be null because insertAfter\n            // is always set to children[i-1], so it must exist\n            spaceElement.insertBefore(element, insertAfter.nextSibling);\n        }\n        return true;\n    }\n\n    addBlock (procedureCode, {args, displayName, callback}) {\n        const procCodeArguments = parseArguments(procedureCode);\n        if (args.length !== procCodeArguments.length) {\n            throw new Error('Procedure code and argument list do not match');\n        }\n\n        if (displayName) {\n            displayName = fixDisplayName(displayName);\n            const displayNameArguments = parseArguments(displayName);\n            if (!compareArrays(procCodeArguments, displayNameArguments)) {\n                console.warn(`displayName ${displayName} for ${procedureCode} has invalid arguments, ignoring it.`);\n                displayName = procedureCode;\n            }\n        } else {\n            displayName = procedureCode;\n        }\n\n        const vm = this.traps.vm;\n        vm.addAddonBlock({\n            procedureCode,\n            arguments: args,\n            callback,\n            color: '#29beb8',\n            secondaryColor: '#3aa8a4',\n            displayName\n        });\n\n        if (!_firstAddBlockRan) {\n            _firstAddBlockRan = true;\n\n            this.traps.getBlockly().then(ScratchBlocks => {\n                const BlockSvg = ScratchBlocks.BlockSvg;\n                const oldUpdateColour = BlockSvg.prototype.updateColour;\n                BlockSvg.prototype.updateColour = function (...args2) {\n                    // procedures_prototype also has a procedure code but we do not want to color them.\n                    if (this.type === 'procedures_call') {\n                        const block = this.procCode_ && vm.runtime.getAddonBlock(this.procCode_);\n                        if (block) {\n                            this.colour_ = '#29beb8';\n                            this.colourSecondary_ = '#3aa8a4';\n                            this.colourTertiary_ = '#3aa8a4';\n                            this.customContextMenu = null;\n                        }\n                    }\n                    return oldUpdateColour.call(this, ...args2);\n                };\n                const originalCreateAllInputs = ScratchBlocks.Blocks.procedures_call.createAllInputs_;\n                ScratchBlocks.Blocks.procedures_call.createAllInputs_ = function (...args2) {\n                    const block = this.procCode_ && vm.runtime.getAddonBlock(this.procCode_);\n                    if (block && block.displayName) {\n                        const originalProcCode = this.procCode_;\n                        this.procCode_ = block.displayName;\n                        const ret = originalCreateAllInputs.call(this, ...args2);\n                        this.procCode_ = originalProcCode;\n                        return ret;\n                    }\n                    return originalCreateAllInputs.call(this, ...args2);\n                };\n                if (vm.editingTarget) {\n                    vm.emitWorkspaceUpdate();\n                }\n            });\n        }\n    }\n\n    getCustomBlock (procedureCode) {\n        const vm = this.traps.vm;\n        return vm.getAddonBlock(procedureCode);\n    }\n\n    createBlockContextMenu (callback, {workspace = false, blocks = false, flyout = false, comments = false} = {}) {\n        contextMenuCallbacks.push({addonId: this._id, callback, workspace, blocks, flyout, comments});\n        contextMenuCallbacks.sort((b, a) => (\n            CONTEXT_MENU_ORDER.indexOf(b.addonId) - CONTEXT_MENU_ORDER.indexOf(a.addonId)\n        ));\n\n        if (createdAnyBlockContextMenus) return;\n        createdAnyBlockContextMenus = true;\n\n        this.traps.getBlockly().then(ScratchBlocks => {\n            const oldShow = ScratchBlocks.ContextMenu.show;\n            ScratchBlocks.ContextMenu.show = function (event, items, rtl) {\n                const gesture = ScratchBlocks.mainWorkspace.currentGesture_;\n                const block = gesture.targetBlock_;\n\n                // eslint-disable-next-line no-shadow\n                for (const {callback, workspace, blocks, flyout, comments} of contextMenuCallbacks) {\n                    const injectMenu =\n                        // Workspace\n                        (workspace && !block && !gesture.flyout_ && !gesture.startBubble_) ||\n                        // Block in workspace\n                        (blocks && block && !gesture.flyout_) ||\n                        // Block in flyout\n                        (flyout && gesture.flyout_) ||\n                        // Comments\n                        (comments && gesture.startBubble_);\n                    if (injectMenu) {\n                        try {\n                            items = callback(items, block);\n                        } catch (e) {\n                            console.error('Error while calling context menu callback: ', e);\n                        }\n                    }\n                }\n\n                oldShow.call(this, event, items, rtl);\n\n                const blocklyContextMenu = ScratchBlocks.WidgetDiv.DIV.firstChild;\n                items.forEach((item, i) => {\n                    if (i !== 0 && item.separator) {\n                        const itemElt = blocklyContextMenu.children[i];\n                        itemElt.style.paddingTop = '2px';\n                        itemElt.classList.add('sa-blockly-menu-item-border');\n                        itemElt.style.borderTop = '1px solid hsla(0, 0%, 0%, 0.15)';\n                    }\n                });\n            };\n        });\n    }\n\n    createEditorContextMenu (callback, options) {\n        addContextMenu(this, callback, options);\n    }\n\n    copyImage (dataURL) {\n        if (!navigator.clipboard.write) {\n            return Promise.reject(new Error('Clipboard API not supported'));\n        }\n        const items = [\n            // eslint-disable-next-line no-undef\n            new ClipboardItem({\n                'image/png': dataURLToBlob(dataURL)\n            })\n        ];\n        return navigator.clipboard.write(items);\n    }\n\n    scratchMessage (id) {\n        return tabReduxInstance.state.locales.messages[id];\n    }\n\n    scratchClass (...args) {\n        const scratchClasses = getScratchClassNames();\n        const classes = [];\n        for (const arg of args) {\n            if (typeof arg === 'string') {\n                for (const scratchClass of scratchClasses) {\n                    if (scratchClass.startsWith(`${arg}_`) && scratchClass.length === arg.length + 6) {\n                        classes.push(scratchClass);\n                        break;\n                    }\n                }\n            }\n        }\n        const options = args[args.length - 1];\n        if (typeof options === 'object') {\n            const others = Array.isArray(options.others) ? options.others : [options.others];\n            for (const className of others) {\n                classes.push(className);\n            }\n        }\n        return classes.join(' ');\n    }\n\n    get editorMode () {\n        return getEditorMode();\n    }\n\n    displayNoneWhileDisabled (el) {\n        el.classList.add(getDisplayNoneWhileDisabledClass(this._id));\n    }\n\n    get direction () {\n        return this.redux.state.locales.isRtl ? 'rtl' : 'ltr';\n    }\n}\n\nclass Settings extends EventTargetShim {\n    constructor (addonId, manifest) {\n        super();\n        this._addonId = addonId;\n        this._manifest = manifest;\n    }\n\n    get (id) {\n        return SettingsStore.getAddonSetting(this._addonId, id);\n    }\n}\n\nclass Self extends EventTargetShim {\n    constructor (id) {\n        super();\n        this.id = id;\n        this.disabled = false;\n    }\n    // These are removed at build-time by pull.js. Throw if attempting to access them at runtime.\n    get dir () {\n        throw new Error(`Addon tried to access addon.self.dir`);\n    }\n    get lib () {\n        throw new Error(`Addon tried to access addon.self.lib`);\n    }\n}\n\nclass AddonRunner {\n    constructor (id) {\n        AddonRunner.instances.push(this);\n        const manifest = addons[id];\n\n        this.id = id;\n        this.manifest = manifest;\n        this.messageCache = {};\n        this.stylesheets = [];\n        this.disabledStylesheet = null;\n        this.loading = true;\n\n        this.publicAPI = {\n            global,\n            console,\n            addon: {\n                tab: new Tab(id),\n                settings: new Settings(id, manifest),\n                self: new Self(id)\n            },\n            msg: this.msg.bind(this),\n            safeMsg: this.safeMsg.bind(this)\n        };\n    }\n\n    _msg (key, vars, handler) {\n        const namespacedKey = `${this.id}/${key}`;\n        if (this.messageCache[namespacedKey]) {\n            return this.messageCache[namespacedKey].format(vars);\n        }\n        let translation = addonMessages[namespacedKey];\n        if (!translation) {\n            return namespacedKey;\n        }\n        if (handler) {\n            translation = handler(translation);\n        }\n        const messageFormat = new IntlMessageFormat(translation, language);\n        this.messageCache[namespacedKey] = messageFormat;\n        return messageFormat.format(vars);\n    }\n\n    msg (key, vars) {\n        return this._msg(key, vars, null);\n    }\n\n    safeMsg (key, vars) {\n        return this._msg(key, vars, escapeHTML);\n    }\n\n    settingsChanged () {\n        this.publicAPI.addon.settings.dispatchEvent(new CustomEvent('change'));\n        this.updateCSSVariables();\n    }\n\n    updateCSSVariables () {\n        if (this.manifest.settings) {\n            const kebabCaseId = kebabCaseToCamelCase(this.id);\n            for (const setting of this.manifest.settings) {\n                const settingId = setting.id;\n                const variable = `--${kebabCaseId}-${kebabCaseToCamelCase(settingId)}`;\n                const value = this.publicAPI.addon.settings.get(settingId);\n                document.documentElement.style.setProperty(variable, value);\n            }\n        }\n    }\n\n    meetsCondition (condition) {\n        if (!condition) {\n            // No condition, so always active.\n            return true;\n        }\n        if (condition.settings) {\n            for (const [settingId, expectedValue] of Object.entries(condition.settings)) {\n                if (this.publicAPI.addon.settings.get(settingId) !== expectedValue) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    dynamicEnable () {\n        if (this.loading) {\n            return;\n        }\n        this.appendStylesheets();\n        if (this.disabledStylesheet) {\n            this.disabledStylesheet.remove();\n            this.disabledStylesheet = null;\n        }\n        this.publicAPI.addon.self.disabled = false;\n        this.publicAPI.addon.self.dispatchEvent(new CustomEvent('reenabled'));\n    }\n\n    dynamicDisable () {\n        if (this.loading) {\n            return;\n        }\n        this.removeStylesheets();\n        const disabledCSS = `.${getDisplayNoneWhileDisabledClass(this.id)}{display:none !important;}`;\n        this.disabledStylesheet = createStylesheet(disabledCSS);\n        addStylesheet(this.disabledStylesheet);\n        this.publicAPI.addon.self.disabled = true;\n        this.publicAPI.addon.self.dispatchEvent(new CustomEvent('disabled'));\n    }\n\n    removeStylesheets () {\n        for (const style of this.stylesheets) {\n            style.remove();\n        }\n    }\n\n    appendStylesheets () {\n        for (const style of this.stylesheets) {\n            addStylesheet(style);\n        }\n    }\n\n    async run () {\n        if (this.manifest.editorOnly) {\n            await untilInEditor();\n        }\n\n        const {resources} = await addonEntries[this.id]();\n\n        if (!this.manifest.noTranslations) {\n            await addonMessagesPromise;\n        }\n\n        this.updateCSSVariables();\n\n        if (this.manifest.userstyles) {\n            for (const userstyle of this.manifest.userstyles) {\n                if (!this.meetsCondition(userstyle.if)) {\n                    continue;\n                }\n                const m = resources[userstyle.url];\n                const source = m[0][1];\n                const style = createStylesheet(source);\n                style.className = 'scratch-addons-theme';\n                style.dataset.addonId = this.id;\n                this.stylesheets.push(style);\n            }\n        }\n        this.appendStylesheets();\n\n        if (this.manifest.userscripts) {\n            for (const userscript of this.manifest.userscripts) {\n                if (!this.meetsCondition(userscript.if)) {\n                    continue;\n                }\n                const fn = resources[userscript.url];\n                fn(this.publicAPI);\n            }\n        }\n\n        this.loading = false;\n    }\n}\nAddonRunner.instances = [];\n\nconst runAddon = addonId => {\n    const runner = new AddonRunner(addonId);\n    runner.run();\n};\n\nlet oldMode = getEditorMode();\nconst emitUrlChange = () => {\n    // In Scratch, URL changes usually mean someone went from editor to fullscreen or something like that.\n    // This is not the case in TW -- the URL can change for many other reasons that addons probably aren't prepared\n    // to handle.\n    const newMode = getEditorMode();\n    if (newMode !== oldMode) {\n        oldMode = newMode;\n        setTimeout(() => {\n            for (const addon of AddonRunner.instances) {\n                addon.publicAPI.addon.tab.dispatchEvent(new CustomEvent('urlChange'));\n            }\n        });\n    }\n};\nconst originalReplaceState = history.replaceState;\nhistory.replaceState = function (...args) {\n    originalReplaceState.apply(this, args);\n    emitUrlChange();\n};\nconst originalPushState = history.pushState;\nhistory.pushState = function (...args) {\n    originalPushState.apply(this, args);\n    emitUrlChange();\n};\n\nSettingsStore.addEventListener('addon-changed', e => {\n    const addonId = e.detail.addonId;\n    const runner = AddonRunner.instances.find(i => i.id === addonId);\n    if (runner) {\n        runner.settingsChanged();\n    }\n    if (e.detail.dynamicEnable) {\n        if (runner) {\n            runner.dynamicEnable();\n        } else {\n            runAddon(addonId);\n        }\n    } else if (e.detail.dynamicDisable) {\n        if (runner) {\n            runner.dynamicDisable();\n        }\n    }\n});\n\nfor (const id of Object.keys(addons)) {\n    if (!SettingsStore.getAddonEnabled(id)) {\n        continue;\n    }\n    runAddon(id);\n}\n","// This file is copied and pasted from ScratchAddons/addon-api/content-script/contextmenu.js\n// I really want to rewrite this, but just looking at it fills me with dread.\n// So that will happen later.\n\n/* eslint-disable */\n\nlet initialized = false;\nlet hasDynamicContextMenu = false;\nlet contextMenus = [];\n\nconst onReactContextMenu = function (e) {\n  if (!e.target) return;\n  const ctxTarget = e.target.closest(\".react-contextmenu-wrapper\");\n  if (!ctxTarget) return;\n  let ctxMenu = ctxTarget.querySelector(\"nav.react-contextmenu\");\n  let type;\n  const extra = {};\n  if (false && !ctxMenu && ctxTarget.closest(\".monitor-overlay\")) {\n    // Monitors are rendered on document.body.\n    // This is internal id which is different from the actual monitor ID.\n    // Optional chain just to prevent crashes when they change the internal stuff.\n    const mInternalId = ctxTarget[this.traps.getInternalKey(ctxTarget)]?.return?.stateNode?.props?.id;\n    if (!mInternalId) return;\n    ctxMenu = Array.prototype.find.call(\n      document.querySelectorAll(\"body > nav.react-contextmenu\"),\n      (candidate) => candidate[this.traps.getInternalKey(candidate)]?.return?.stateNode?.props?.id === mInternalId\n    );\n    if (!ctxMenu) return;\n    const props = ctxTarget[this.traps.getInternalKey(ctxTarget)]?.return?.return?.return?.stateNode?.props;\n    if (!props) return;\n    extra.monitorParams = props.params;\n    extra.opcode = props.opcode;\n    extra.itemId = props.id;\n    extra.targetId = props.targetId;\n    type = `monitor_${props.mode}`;\n  } else if (ctxTarget[this.traps.getInternalKey(ctxTarget)]?.return?.return?.return?.stateNode?.props?.dragType) {\n    // SpriteSelectorItem which despite its name is used for costumes, sounds, backpacked script etc\n    const props = ctxTarget[this.traps.getInternalKey(ctxTarget)].return.return.return.stateNode.props;\n    type = props.dragType.toLowerCase();\n    extra.name = props.name;\n    extra.itemId = props.id;\n    extra.index = props.index;\n  } else {\n    return;\n  }\n  const ctx = {\n    menuItem: ctxMenu,\n    target: ctxTarget,\n    type,\n    ...extra,\n  };\n  Array.from(ctxMenu.children).forEach((existing) => {\n    if (existing.classList.contains(\"sa-ctx-menu\")) existing.remove();\n  });\n  for (const item of hasDynamicContextMenu\n    ? contextMenus.flatMap((menu) => (typeof menu === \"function\" ? menu(type, ctx) : menu))\n    : contextMenus) {\n    if (!item) continue;\n    if (item.types && !item.types.some((itemType) => type === itemType)) continue;\n    if (item.condition && !item.condition(ctx)) continue;\n    const itemElem = document.createElement(\"div\");\n    const classes = [\"context-menu_menu-item\"];\n    if (item.border) classes.push(\"context-menu_menu-item-bordered\");\n    if (item.dangerous) classes.push(\"context-menu_menu-item-danger\");\n    itemElem.className = this.scratchClass(...classes, {\n      others: [\"react-contextmenu-item\", \"sa-ctx-menu\", item.className || \"\"],\n    });\n    const label = document.createElement(\"span\");\n    label.textContent = item.label;\n    itemElem.append(label);\n    this.displayNoneWhileDisabled(itemElem, {\n      display: \"block\",\n    });\n\n    itemElem.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      window.dispatchEvent(\n        new CustomEvent(\"REACT_CONTEXTMENU_HIDE\", {\n          detail: {\n            action: \"REACT_CONTEXTMENU_HIDE\",\n          },\n        })\n      );\n      item.callback(ctx);\n    });\n\n    this.appendToSharedSpace({\n      space: item.position,\n      order: item.order,\n      scope: ctxMenu,\n      element: itemElem,\n    });\n  }\n  return;\n};\n\nconst initialize = (tab) => {\n  if (initialized) return;\n  initialized = true;\n  document.body.addEventListener(\"contextmenu\", (e) => onReactContextMenu.call(tab, e), { capture: true });\n};\n\nexport const addContextMenu = (tab, callback, opts) => {\n  if (typeof opts === \"undefined\") {\n    contextMenus.push(callback);\n    hasDynamicContextMenu = true;\n  } else {\n    contextMenus.push({\n      ...opts,\n      callback,\n    });\n  }\n  initialize(tab);\n};\n","/* generated by pull.js */\nexport default {\n  \"cat-blocks\": () => import(/* webpackChunkName: \"addon-entry-cat-blocks\" */ \"../addons/cat-blocks/_runtime_entry.js\"),\n  \"editor-devtools\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/editor-devtools/_runtime_entry.js\"),\n  \"editor-searchable-dropdowns\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/editor-searchable-dropdowns/_runtime_entry.js\"),\n  \"data-category-tweaks-v2\": () => import(/* webpackChunkName: \"addon-entry-data-category-tweaks-v2\" */ \"../addons/data-category-tweaks-v2/_runtime_entry.js\"),\n  \"block-palette-icons\": () => import(/* webpackChunkName: \"addon-entry-block-palette-icons\" */ \"../addons/block-palette-icons/_runtime_entry.js\"),\n  \"hide-flyout\": () => import(/* webpackChunkName: \"addon-entry-hide-flyout\" */ \"../addons/hide-flyout/_runtime_entry.js\"),\n  \"mediarecorder\": () => import(/* webpackChunkName: \"addon-entry-mediarecorder\" */ \"../addons/mediarecorder/_runtime_entry.js\"),\n  \"drag-drop\": () => require(\"../addons/drag-drop/_runtime_entry.js\"),\n  \"debugger\": () => import(/* webpackChunkName: \"addon-entry-debugger\" */ \"../addons/debugger/_runtime_entry.js\"),\n  \"pause\": () => require(\"../addons/pause/_runtime_entry.js\"),\n  \"mute-project\": () => require(\"../addons/mute-project/_runtime_entry.js\"),\n  \"clones\": () => import(/* webpackChunkName: \"addon-entry-clones\" */ \"../addons/clones/_runtime_entry.js\"),\n  \"mouse-pos\": () => import(/* webpackChunkName: \"addon-entry-mouse-pos\" */ \"../addons/mouse-pos/_runtime_entry.js\"),\n  \"color-picker\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/color-picker/_runtime_entry.js\"),\n  \"remove-sprite-confirm\": () => import(/* webpackChunkName: \"addon-entry-remove-sprite-confirm\" */ \"../addons/remove-sprite-confirm/_runtime_entry.js\"),\n  \"block-count\": () => import(/* webpackChunkName: \"addon-entry-block-count\" */ \"../addons/block-count/_runtime_entry.js\"),\n  \"onion-skinning\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/onion-skinning/_runtime_entry.js\"),\n  \"bitmap-copy\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/bitmap-copy/_runtime_entry.js\"),\n  \"2d-color-picker\": () => import(/* webpackChunkName: \"addon-entry-2d-color-picker\" */ \"../addons/2d-color-picker/_runtime_entry.js\"),\n  \"better-img-uploads\": () => import(/* webpackChunkName: \"addon-entry-better-img-uploads\" */ \"../addons/better-img-uploads/_runtime_entry.js\"),\n  \"custom-block-shape\": () => import(/* webpackChunkName: \"addon-entry-custom-block-shape\" */ \"../addons/custom-block-shape/_runtime_entry.js\"),\n  \"editor-theme3\": () => import(/* webpackChunkName: \"addon-entry-editor-theme3\" */ \"../addons/editor-theme3/_runtime_entry.js\"),\n  \"custom-block-text\": () => import(/* webpackChunkName: \"addon-entry-custom-block-text\" */ \"../addons/custom-block-text/_runtime_entry.js\"),\n  \"editor-colored-context-menus\": () => import(/* webpackChunkName: \"addon-entry-editor-colored-context-menus\" */ \"../addons/editor-colored-context-menus/_runtime_entry.js\"),\n  \"editor-stage-left\": () => import(/* webpackChunkName: \"addon-entry-editor-stage-left\" */ \"../addons/editor-stage-left/_runtime_entry.js\"),\n  \"variable-manager\": () => import(/* webpackChunkName: \"addon-entry-variable-manager\" */ \"../addons/variable-manager/_runtime_entry.js\"),\n  \"search-sprites\": () => import(/* webpackChunkName: \"addon-entry-search-sprites\" */ \"../addons/search-sprites/_runtime_entry.js\"),\n  \"gamepad\": () => import(/* webpackChunkName: \"addon-entry-gamepad\" */ \"../addons/gamepad/_runtime_entry.js\"),\n  \"editor-sounds\": () => import(/* webpackChunkName: \"addon-entry-editor-sounds\" */ \"../addons/editor-sounds/_runtime_entry.js\"),\n  \"folders\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/folders/_runtime_entry.js\"),\n  \"block-switching\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/block-switching/_runtime_entry.js\"),\n  \"load-extensions\": () => import(/* webpackChunkName: \"addon-entry-load-extensions\" */ \"../addons/load-extensions/_runtime_entry.js\"),\n  \"custom-zoom\": () => import(/* webpackChunkName: \"addon-entry-custom-zoom\" */ \"../addons/custom-zoom/_runtime_entry.js\"),\n  \"initialise-sprite-position\": () => import(/* webpackChunkName: \"addon-entry-initialise-sprite-position\" */ \"../addons/initialise-sprite-position/_runtime_entry.js\"),\n  \"blocks2image\": () => import(/* webpackChunkName: \"addon-entry-blocks2image\" */ \"../addons/blocks2image/_runtime_entry.js\"),\n  \"remove-curved-stage-border\": () => import(/* webpackChunkName: \"addon-entry-remove-curved-stage-border\" */ \"../addons/remove-curved-stage-border/_runtime_entry.js\"),\n  \"transparent-orphans\": () => import(/* webpackChunkName: \"addon-entry-transparent-orphans\" */ \"../addons/transparent-orphans/_runtime_entry.js\"),\n  \"paint-by-default\": () => import(/* webpackChunkName: \"addon-entry-paint-by-default\" */ \"../addons/paint-by-default/_runtime_entry.js\"),\n  \"block-cherry-picking\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/block-cherry-picking/_runtime_entry.js\"),\n  \"hide-new-variables\": () => import(/* webpackChunkName: \"addon-entry-hide-new-variables\" */ \"../addons/hide-new-variables/_runtime_entry.js\"),\n  \"editor-extra-keys\": () => import(/* webpackChunkName: \"addon-entry-editor-extra-keys\" */ \"../addons/editor-extra-keys/_runtime_entry.js\"),\n  \"hide-delete-button\": () => import(/* webpackChunkName: \"addon-entry-hide-delete-button\" */ \"../addons/hide-delete-button/_runtime_entry.js\"),\n  \"no-script-bumping\": () => import(/* webpackChunkName: \"addon-entry-no-script-bumping\" */ \"../addons/no-script-bumping/_runtime_entry.js\"),\n  \"disable-stage-drag-select\": () => import(/* webpackChunkName: \"addon-entry-disable-stage-drag-select\" */ \"../addons/disable-stage-drag-select/_runtime_entry.js\"),\n  \"move-to-top-bottom\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/move-to-top-bottom/_runtime_entry.js\"),\n  \"disable-paste-offset\": () => import(/* webpackChunkName: \"addon-entry-disable-paste-offset\" */ \"../addons/disable-paste-offset/_runtime_entry.js\"),\n  \"block-duplicate\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/block-duplicate/_runtime_entry.js\"),\n  \"swap-local-global\": () => import(/* webpackChunkName: \"addon-entry-swap-local-global\" */ \"../addons/swap-local-global/_runtime_entry.js\"),\n  \"editor-comment-previews\": () => import(/* webpackChunkName: \"addon-default-entry\" */ \"../addons/editor-comment-previews/_runtime_entry.js\"),\n  \"columns\": () => import(/* webpackChunkName: \"addon-entry-columns\" */ \"../addons/columns/_runtime_entry.js\"),\n  \"script-snap\": () => import(/* webpackChunkName: \"addon-entry-script-snap\" */ \"../addons/script-snap/_runtime_entry.js\"),\n  \"fullscreen\": () => import(/* webpackChunkName: \"addon-entry-fullscreen\" */ \"../addons/fullscreen/_runtime_entry.js\"),\n  \"tw-straighten-comments\": () => import(/* webpackChunkName: \"addon-entry-tw-straighten-comments\" */ \"../addons/tw-straighten-comments/_runtime_entry.js\"),\n  \"tw-remove-backpack\": () => import(/* webpackChunkName: \"addon-entry-tw-remove-backpack\" */ \"../addons/tw-remove-backpack/_runtime_entry.js\"),\n  \"tw-remove-feedback\": () => import(/* webpackChunkName: \"addon-entry-tw-remove-feedback\" */ \"../addons/tw-remove-feedback/_runtime_entry.js\"),\n  \"tw-disable-compiler\": () => import(/* webpackChunkName: \"addon-entry-tw-disable-compiler\" */ \"../addons/tw-disable-compiler/_runtime_entry.js\"),\n  \"editor-stepping\": () => import(/* webpackChunkName: \"addon-entry-editor-stepping\" */ \"../addons/editor-stepping/_runtime_entry.js\"),\n};\n","/* generated by pull.js */\nexport default {\n  \"de\": () => import(/* webpackChunkName: \"addon-l10n-de\" */ \"../addons-l10n/de.json\"),\n  \"es\": () => import(/* webpackChunkName: \"addon-l10n-es\" */ \"../addons-l10n/es.json\"),\n  \"fr\": () => import(/* webpackChunkName: \"addon-l10n-fr\" */ \"../addons-l10n/fr.json\"),\n  \"it\": () => import(/* webpackChunkName: \"addon-l10n-it\" */ \"../addons-l10n/it.json\"),\n  \"ja\": () => import(/* webpackChunkName: \"addon-l10n-ja\" */ \"../addons-l10n/ja.json\"),\n  \"ko\": () => import(/* webpackChunkName: \"addon-l10n-ko\" */ \"../addons-l10n/ko.json\"),\n  \"nl\": () => import(/* webpackChunkName: \"addon-l10n-nl\" */ \"../addons-l10n/nl.json\"),\n  \"pl\": () => import(/* webpackChunkName: \"addon-l10n-pl\" */ \"../addons-l10n/pl.json\"),\n  \"pt\": () => import(/* webpackChunkName: \"addon-l10n-pt\" */ \"../addons-l10n/pt.json\"),\n  \"ro\": () => import(/* webpackChunkName: \"addon-l10n-ro\" */ \"../addons-l10n/ro.json\"),\n  \"ru\": () => import(/* webpackChunkName: \"addon-l10n-ru\" */ \"../addons-l10n/ru.json\"),\n  \"sl\": () => import(/* webpackChunkName: \"addon-l10n-sl\" */ \"../addons-l10n/sl.json\"),\n  \"tr\": () => import(/* webpackChunkName: \"addon-l10n-tr\" */ \"../addons-l10n/tr.json\"),\n};\n","/* eslint-disable no-extend-native */\n\nif (!Blob.prototype.text) {\n    Blob.prototype.text = function () {\n        return new Promise((resolve, reject) => {\n            const fr = new FileReader();\n            fr.onload = () => resolve(fr.result);\n            fr.onerror = () => reject(new Error('Cannot read blob as text'));\n            fr.readAsText(this);\n        });\n    };\n}\n\nif (!Array.prototype.flat) {\n    Array.prototype.flat = function (depth = 1) {\n        const result = [];\n        for (const i of this) {\n            if (Array.isArray(i)) {\n                if (depth < 1) {\n                    result.push(i);\n                } else {\n                    for (const j of i.flat(depth - 1)) {\n                        result.push(j);\n                    }\n                }\n            } else {\n                result.push(i);\n            }\n        }\n        return result;\n    };\n}\n\nif (typeof queueMicrotask !== 'function') {\n    window.queueMicrotask = callback => {\n        Promise.resolve().then(callback);\n    };\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;ACAA;AAAA;;;;;;;;;;;;ACAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAPA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAJA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAOA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAKA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;;;;;;;ACxXA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAKA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;AClIA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;;;;;;;;;;;;ACFA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrCA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAcA;AACA;AACA;AACA;AACA;AACA;AAEA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;AACA;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAKA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AA1CA;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAQA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAIA;AANA;AAWA;AACA;AACA;AAIA;AANA;AAjDA;AA2DA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAGA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/ZA;AACA;AAgaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AACA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAbA;AACA;AAcA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AATA;AAWA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/JA;AACA;AA+JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;ACr3BA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,2OAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AAEA;AACA;AADA;AADA;AAMA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAFA;AAIA;AACA;AAAA;AACA;;;;;;;;;;;;ACjHA;AAAA;AACA;AACA,qPAAA;AACA,8PAAA;AACA,kSAAA;AACA,sTAAA;AACA,kSAAA;AACA,0PAAA;AACA,oQAAA;AACA;AACA,2OAAA;AACA;AACA;AACA,iOAAA;AACA,gPAAA;AACA,qPAAA;AACA,4SAAA;AACA,0PAAA;AACA,2PAAA;AACA,kPAAA;AACA,8QAAA;AACA,6RAAA;AACA,6RAAA;AACA,oQAAA;AACA,wRAAA;AACA,+UAAA;AACA,wRAAA;AACA,mRAAA;AACA,yQAAA;AACA,sOAAA;AACA,oQAAA;AACA,sOAAA;AACA,8PAAA;AACA,8QAAA;AACA,0PAAA;AACA,qUAAA;AACA,+PAAA;AACA,qUAAA;AACA,kSAAA;AACA,mRAAA;AACA,6QAAA;AACA,6RAAA;AACA,wRAAA;AACA,6RAAA;AACA,wRAAA;AACA,gUAAA;AACA,uQAAA;AACA,uSAAA;AACA,8PAAA;AACA,wRAAA;AACA,sRAAA;AACA,sOAAA;AACA,0PAAA;AACA,qPAAA;AACA,iTAAA;AACA,6RAAA;AACA,6RAAA;AACA,kSAAA;AACA,8QAAA;AAzDA;;;;;;;;;;;;ACDA;AAAA;AACA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AACA,gMAAA;AAbA;;;;;;;;;;;ACDA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}